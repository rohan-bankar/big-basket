"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3287],{21897:function(e,n,t){t.d(n,{v:function(){return a}});var o=t(40219),r=t(11163),i=t(67294),s={},a=function(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.screenType,c=void 0===a?"hp":a,d=t.screenTypeId,l=void 0===d?"":d,u=(0,r.useRouter)(),f=null===u||void 0===u||null===(e=u.asPath)||void 0===e||null===(n=e.split("?"))||void 0===n?void 0:n[0],v=(0,i.useCallback)((function(e){var n=e.bannerId;s[n]?s[n]=s[n]+1:s[n]||(s[n]=1)}),[]),p=(0,i.useCallback)((function(){var e=Object.keys(s).map((function(e){return"".concat(e,":").concat(s[e])}));e.length&&(0,o.triggerSnowplowEventBannerImpressions)({EventName:"Banner_Impressions",ScreenType:c,ScreenTypeID:l,BannerImpsClicks:e}),s={}}),[]);return(0,i.useEffect)((function(){return function(){p()}}),[l,c,f]),{handleInViewBanner:v,fireBannerImpressionEvent:p}}},93287:function(e,n,t){t.d(n,{Z:function(){return T},W:function(){return d.iQ}});var o=t(59499),r=t(16835),i=t(4730),s=t(37173),a=t(25259),c=t(67294),d=t(74710),l=t(96758),u=t(54998),f=t.n(u),v=t(53589),p=t(173),h=t(47684),m=t(73433),g=t(49625),w=t(27269),y=t(21897),S=t(23885),x=t(11163),P=t(40219),I=t(97650),j=function(e){return e.endsWith("/")||(e+="/"),e},b=t(85893),C=["deckInfo","onChange","options","extraPayload","listType","tab","Offercard","analyticsAttrs","screenItemPosition","screenInPageContext","screenInPagePosition","screenTypeId","screenType","handleSKUSelection","isSKUSelected"];function O(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function k(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?O(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Z=function(e){var n,t,s,u=e.deckInfo,O=void 0===u?{}:u,Z=e.onChange,T=void 0===Z?function(){}:Z,E=e.options,A=void 0===E?d.nF:E,D=e.extraPayload,B=void 0===D?{}:D,R=e.listType,U=void 0===R?"":R,K=e.tab,L=void 0===K?{}:K,W=e.Offercard,F=e.analyticsAttrs,M=void 0===F?{}:F,z=e.screenItemPosition,H=e.screenInPageContext,$=e.screenInPagePosition,q=e.screenTypeId,J=e.screenType,Q=e.handleSKUSelection,V=void 0===Q?function(){}:Q,Y=e.isSKUSelected,G=void 0!==Y&&Y,X=(0,i.Z)(e,C),ee=(0,c.useContext)(v._).enableOfferEntryPoint,ne=(0,h.p)(),te=(0,y.v)().fireBannerImpressionEvent,oe=c.useState(""),re=(0,r.Z)(oe,2),ie=re[0],se=re[1],ae=c.useState(!1),ce=(0,r.Z)(ae,2),de=ce[0],le=ce[1],ue=null!==O&&void 0!==O&&null!==(n=O.additionalAttributes)&&void 0!==n&&n.info.length?null===O||void 0===O||null===(t=O.additionalAttributes)||void 0===t||null===(s=t.info)||void 0===s?void 0:s.filter((function(e){return"citrusads"==e.type})):[],fe=(0,w.iP)(),ve=(0,x.useRouter)(),pe=(0,c.useRef)(null),he=(0,c.useState)({}),me=he[0],ge=he[1],we=(0,I.YD)({threshold:.1,onChange:function(e,n){if(e){var t=n.target;if(n.isIntersecting&&!me[t.id]&&(ge((function(e){return k(k({},e),{},(0,o.Z)({},t.id,!0))})),ue.length)){var r,i=null===(r=ue[0])||void 0===r?void 0:r.ad_id;p.v.sendCitrusadReportingImpressions(i)}}}}),ye=(0,r.Z)(we,1)[0];(0,c.useEffect)((function(){var e=function(e,n){!1===n.shallow&&ge({})};return ve.events.on("routeChangeStart",e),function(){ve.events.off("routeChangeStart",e)}}),[ve]);var Se=function(){var e,n,t,o,r,i,s,a;Pe(),function(){var e=ve.query||{},n=e.listing,t=e.slug,o=JSON.parse(localStorage.getItem("snowplowData"))||{};o.ScreenSlug=j(function(e){return e.startsWith("/")||(e="/"+e),e}("".concat(n?n+"/":"").concat(t?null===t||void 0===t?void 0:t.join("/"):""))),o.ScreenURL=window.location.href.includes("?")?window.location.href:j(window.location.href),o.ScreenTypeID=q,o.ScreenType=J,(0,P.saveSnowplowDataInLocalStorage)(o)}(),te();var c={list:U},d=[{name:"".concat(null===O||void 0===O||null===(e=O.brand)||void 0===e?void 0:e.name," ").concat(null===O||void 0===O?void 0:O.description,", ").concat(null===O||void 0===O?void 0:O.weight," ").concat(null===O||void 0===O?void 0:O.packDesc),id:"".concat(null===O||void 0===O?void 0:O.id),price:Number(null===O||void 0===O||null===(n=O.pricing)||void 0===n||null===(t=n.discount)||void 0===t||null===(o=t.prim_price)||void 0===o?void 0:o.sp),brand:null===O||void 0===O||null===(r=O.brand)||void 0===r?void 0:r.name,category:"".concat(null!==O&&void 0!==O&&null!==(i=O.category)&&void 0!==i&&i.tlc_name?"".concat(null===O||void 0===O||null===(s=O.category)||void 0===s?void 0:s.tlc_name," > "):""," ").concat((null===O||void 0===O||null===(a=O.category)||void 0===a?void 0:a.llc_name)||"").trim(),posotion:z}];(0,m._0)({actionField:c,products:d})},xe=function(e,n){var t,o,r,i,s={eventName:e,ScreenType:null!==ve&&void 0!==ve&&null!==(t=ve.asPath)&&void 0!==t&&t.includes("/ps/")?"ps":J,screenTypeId:null!==ve&&void 0!==ve&&null!==(o=ve.asPath)&&void 0!==o&&o.includes("/ps/")?void 0:q,InPageContext:n||(null===O||void 0===O||null===(r=O.pricing)||void 0===r||null===(i=r.discount)||void 0===i?void 0:i.offer_entry_text),id:null===O||void 0===O?void 0:O.id,fromExtendedList:X.fromExtendedList};(0,S.PN)(s)};(0,c.useEffect)((function(){ee("")}),[]);var Pe=function(){var e,n;ue.length?(localStorage.setItem("ReferrerExternalAdID",null===(e=ue[0])||void 0===e?void 0:e.ad_id),localStorage.setItem("ReferrerExternalAdProvider","citrusad"),p.v.sendCitrusadReportingClicks(null===(n=ue[0])||void 0===n?void 0:n.ad_id)):(localStorage.removeItem("ReferrerExternalAdID"),localStorage.removeItem("ReferrerExternalAdProvider"));localStorage.setItem("ReferrerScreenListingPosition",z)},Ie=O.brand,je=void 0===Ie?{}:Ie,be=O.description,Ce=void 0===be?"":be,Oe=O.id,ke=void 0===Oe?"":Oe,Ze=O.visibility,Te=void 0===Ze?{}:Ze,Ne=O.weight,_e=void 0===Ne?"":Ne,Ee=O.packDesc,Ae=void 0===Ee?"":Ee,De=O.skuType,Be=void 0===De?"":De,Re=O.absoluteUrl,Ue=void 0===Re?"":Re,Ke="".concat(je.name||""," ").concat(Ce||""," ").concat(_e||"").concat(Ae?" "+Ae:"").concat(Be?" "+Be:""),Le=(L||{}).tabTitle,We=void 0===Le?"":Le,Fe=f()(Ue),Me=Ce;return(0,b.jsx)("div",k(k({ref:ye},X),{},{children:(0,b.jsxs)(a.Z,{ref:pe,deckInfo:k({},O),skuDeckOfferCommnuication:W,children:[(0,b.jsxs)(a.Z.DivWrapper,{Offercard:W,className:"relative border border-solid border-silverSurfer-200 rounded-xs",children:[A.renderSKUImage&&(0,b.jsx)(a.Z.Image,{options:A,listType:U,tabTitle:We,imageAltText:"".concat(Ke),screenInPageContext:H,screenInPagePosition:$,screenItemName:Me,screenItemPosition:z,onClick:Se}),A.productSelection&&(0,b.jsx)(a.Z.ProductSelection,{isSKUSelected:G,handleSKUSelection:V}),A.showFoodCat&&(0,b.jsx)(a.Z.FoodCategory,{}),(0,b.jsx)(a.Z.Offers,{showOffers:A.showOffers})]}),A.renderTagsAndSlot&&(A.showSponsor&&ue.length||A.showSlot)&&(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(a.Z.DivWrapper,{Offercard:W,className:"w-full h-5 flex justify-between pt-0.5 xl:pt-1",children:[A.showSponsor&&ue.length?(0,b.jsx)(a.Z.CitrusAd,{citrusad:ue}):(0,b.jsx)(a.Z.Sponsor,{}),A.showSlot&&(0,b.jsx)(N,{screenItemPosition:z})]})}),(0,b.jsxs)(a.Z.HeadingWrapper,{Offercard:W,className:"flex flex-col xl:gap-1 lg:gap-0.5",children:[(0,b.jsx)(a.Z.DeckHeadingLink,{showBrand:A.showBrand,showProductName:A.showProductName,onClick:Se,listType:U,screenInPageContext:H,screenInPagePosition:$,screenItemName:Me,screenItemPosition:z}),A.renderRnR&&(0,b.jsx)(a.Z.ReviewsAndRatings,{showRnr:A.showRatings}),A.renderPackSelector&&(0,b.jsx)("div",{className:"py-1.5 xl:py-1",children:(0,b.jsx)(a.Z.PackSelector,{onClick:Pe,citrusAdId:ue,analyticsAttrs:M,showPackSize:A.showPacksize,screenType:J,screenTypeId:q,fromExtendedList:X.fromExtendedList})})]}),(0,b.jsxs)(a.Z.DivWrapper,{Offercard:W,className:"flex flex-col gap-0.5",children:[(0,b.jsx)(a.Z.Pricing,{showMrp:A.showMrp,showSp:A.showSp}),A.renderBBStar&&!W&&(0,b.jsx)(a.Z.BBstarPrice,{showBBstar:A.showBBstar})]}),A.renderOfferComm&&(0,b.jsx)(a.Z.DivWrapper,{Offercard:W,children:(0,b.jsx)("div",{className:"w-full  py-1.5",children:(0,b.jsx)(a.Z.OfferCommunication,{state:ie,Offercard:W,OfferCommApiStatus:de,onClick:function(){p.v.postOfferCommunicationCard(ke,Te).then((function(e){"SUCCESS"===e.status&&null!==e.data[0]?(se(e),ee(ke),le(!0),xe("offercard_opened")):(ee(""),le(!1),ne({msg:"Something went wrong, don't worry we are working on it",type:"Danger"}))})).catch((function(){ee(""),le(!1),ne({msg:"Something went wrong, don't worry we are working on it",type:"Danger"})})),Pe();var e={EventName:"offercard_clicked",screenType:J,selectedSKU:{id:ke},analyticsAttrs:M,citrusAdId:ue};(0,S.Fc)(e)}})})}),de&&(0,b.jsxs)(g.ww.div,{className:" ".concat(W?"h-10 block":"hidden"),animate:fe.width>=1440?{y:W?-445:0}:{y:W?-400:0},transition:{duration:W?1:.3,ease:[.25,.5,.75,1]},children:[(0,b.jsx)("div",{className:"pb-1",children:(0,b.jsxs)(l.Z,{href:"".concat(Fe),animate:{opacity:1},exit:{opacity:0},className:"h-full",onClick:Se,children:[(0,b.jsx)(a.Z.BrandName,{showBrand:A.showBrand}),(0,b.jsx)(a.Z.ProductName,{showProductName:A.showProductName})]})}),(0,b.jsx)(a.Z.Pricing,{showMrp:A.showMrp,showSp:A.showSp}),(0,b.jsx)(a.Z.OfferEntryPoint,{Offercard:W,state:ie,closeCommunicationPopUp:function(e){ee(""),xe("offercard_closed",e)}})]}),(0,b.jsx)(_,{Offercard:W,options:A,onChange:T,extraPayload:B,listType:U,screenInPagePosition:$,screenInPageContext:H,analyticsAttrs:M,screenType:J,tab:L,screenItemName:Me,screenItemPosition:z,onClick:Pe,citrusAdId:ue,screenTypeId:q,parentRef:pe,enableOfferEntryPoint:ee,$_css:[{width:"100%",height:"100%"}]})]})}))},T=c.memo(Z),N=(0,s.ZP)(a.Z.ETA).withConfig({displayName:"SKU___StyledSKUDeckETA",componentId:"sc-1bishsc-0"})({marginLeft:"auto"}),_=(0,s.ZP)(a.Z.CTA).withConfig({displayName:"SKU___StyledSKUDeckCTA",componentId:"sc-1bishsc-1"})(["",""],(function(e){return e.$_css}))}}]);